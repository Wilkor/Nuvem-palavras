
<!DOCTYPE html>
<meta charset="utf-8">
<head>
    
  </head>
<title>Word Cloud Generator</title>
<style>
    
 iframe[Attributes Style] {
    height:auto !important;
}
body {
  position: relative;
  font-family: "Helvetica Neue", sans-serif;
  width: 960px;
  heigth:1000px;
  margin: auto;
  margin-bottom: 1em;
  margin-top: 20px;
}
#presets a { border-left: solid #666 1px; padding: 0 10px; }
#presets a.first { border-left: none; }
#keyword { width: 300px; }
#fetcher { width: 500px; }
#keyword, #go { font-size: 1.5em; }
#text { width: 100%; height: 100px; }
p.copy { font-size: small; }
#form { font-size: small; position: relative; }
hr { border: none; border-bottom: solid #ccc 1px; }
a.active { text-decoration: none; color: #000; font-weight: bold; cursor: text; }
#angles line, #angles path, #angles circle { stroke: #666; }
#angles text { fill: #333; }
#angles path.drag { fill: #666; cursor: move; }
#angles { text-align: center; margin: 0 auto; width: 350px; }
#angles input, #max { width: 42px; }
</style>

<body>

    <div id="vis"></div>

<form id="form">

<p style="position: absolute; right: 0; top: 0" id="status"></p>

<div style="text-align: center">
  <div id="presets"></div>
  <div id="custom-area">
  
    <p><textarea id="text" style="display:none;">
    </textarea>
    <button id="go" type="submit" onclick="getTickets()">Teste</button>
  </div>
</div>


<div style="display:none;">
    <hr>

     <div style="float: right; text-align: right">
       <p><label for="max">Number of words:</label> <input type="number" value="250" min="1" id="max">
       <p><label for="per-line"><input type="checkbox" id="per-line"> One word per line</label>
       <!--<p><label for="colours">Colours:</label> <a href="#" id="random-palette">get random palette</a>-->
       <p><label>Download:</label>
         <button id="download-svg">SVG</button><!-- |
         <a id="download-png" href="#">PNG</a>-->
     </div>
     
     <div style="float: left">
       <p><label>Spiral:</label>
         <label for="archimedean"><input type="radio" name="spiral" id="archimedean" value="archimedean" checked="checked"> Archimedean</label>
         <label for="rectangular"><input type="radio" name="spiral" id="rectangular" value="rectangular"> Rectangular</label>
       <p><label for="scale">Scale:</label>
         <label for="scale-log"><input type="radio" name="scale" id="scale-log" value="log" checked="checked"> log n</label>
         <label for="scale-sqrt"><input type="radio" name="scale" id="scale-sqrt" value="sqrt"> √n</label>
         <label for="scale-linear"><input type="radio" name="scale" id="scale-linear" value="linear"> n</label>
       <p><label for="font">Font:</label> <input type="text" id="font" value="Impact">
     </div>
     
     <div id="angles">
       <p><input type="number" id="angle-count" value="5" min="1"> <label for="angle-count">orientations</label>
         <label for="angle-from">from</label> <input type="number" id="angle-from" value="-60" min="-90" max="90"> °
         <label for="angle-to">to</label> <input type="number" id="angle-to" value="60" min="-90" max="90"> °
     </div>
     
     <hr style="clear: both">
 </div>

</form>


</body>

<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px;margin-left:116px" data-ad-client="ca-pub-2911491153890039" data-ad-slot="2029654015"></ins>

<script src="https://www.jasondavies.com/d3.min.js"></script>
<script src="https://www.jasondavies.com/wordcloud/cloud.min.js"></script>
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>


<script type="text/javascript">






 function getTickets(){

    var urlApi =  "https://http.msging.net/commands";

    payload = {
                "id": "123123",
                "to": "postmaster@desk.msging.net",
                "method": "get",
                "uri": "/tickets/"
                }

       $.ajax({
           type: "POST",
           dataType: 'json',
           url: urlApi,
           crossDomain: true,
           async: false,
           contentType: "application/json; charset=utf-8",
           beforeSend: function(xhr) {
               xhr.setRequestHeader('Authorization', 'Key c2FmcmFwcm9kdXJhdmVpY3Vsb3M6a2kxRWk4YXdqVzRNRDBNNWZpVnE=');
           },
           error: function (jqXHR, textStatus, errorThrown) {
               console.log(textStatus);
               alert('Falha na consulta de valores específicos, erro:' + textStatus);
           },
           success: function (msg) {

            let ids = []

                msg.resource.items.map(function(e){
                       
                      ids.push(e.id)
                })


               showClouds(ids)
               
               
           },
           data: JSON.stringify(payload)
       });

  }


  function showClouds(ids){


    const randomElement = ids[Math.floor(Math.random() * ids.length)];

    
    var urlApi =  "https://http.msging.net/commands";

    payload = {
                "id": "123123",
                "to": "postmaster@desk.msging.net",
                "method": "get",
                "uri": "/tickets/"+randomElement+"/messages"
                }

       $.ajax({
           type: "POST",
           dataType: 'json',
           url: urlApi,
           crossDomain: true,
           async: false,
           contentType: "application/json; charset=utf-8",
           beforeSend: function(xhr) {
               xhr.setRequestHeader('Authorization', 'Key c2FmcmFwcm9kdXJhdmVpY3Vsb3M6a2kxRWk4YXdqVzRNRDBNNWZpVnE=');
           },
           error: function (jqXHR, textStatus, errorThrown) {
               console.log(textStatus);
               alert('Falha na consulta de valores específicos, erro:' + textStatus);
           },
           success: function (msg) {

            document.getElementById("text").innerHTML =   JSON.stringify(msg)
               
               
           },
           data: JSON.stringify(payload)
       });


  }
</script>
